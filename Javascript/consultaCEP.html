<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--título-->
        <title>API via CEP</title>
    </head>

    <body>
        <!--header-->
        <h1>API via CEP</h1>

        <!--formulário-->
        <form action="" method="post">
            <!--rótulo-->
            <label for="cep">CEP:</label><br>
            <!--caixa de preenchimento de texto-->
            <input type="text" name="cep" id="cep" autofocus required>
            <!--botão de buscar CEP-->
            <button type="submit" onclick="consultaCEP()">Buscar</button>
            
            <br><br>
            
            <!--rótulo-->
            <label for="logradouro">Logradouro:</label><br>
            <!--caixa de preenchimento de texto-->
            <input type="text" name="logradouro" id="logradouro" required><br>
            
            <br>
            
            <!--rótulo-->
            <label for="bairro">Bairro:</label><br>
            <!--caixa de preenchimento de texto-->
            <input type="text" name="bairro" id="bairro" required><br>
            
            <br>
            
            <!--rótulo-->
            <label for="localidade">Endereço:</label><br>
            <!--caixa de preenchimento de texto-->
            <input type="text" name="localidade" id="localidade" required><br>
            
            <br>
            
            <!--rótulo-->
            <label for="uf">Estado/UF:</label><br>
            <!--caixa de preenchimento de texto-->
            <input type="text" name="uf" id="uf" required><br>
            
            <br><br>
            
            <!--botão de enviar informações-->
            <button type='submit'>Enviar</button>

        </form>

        <script>
            //cria função
            function consultaCEP() {
                //define a variável 'cep' como o valor obtido por 'cep' no html
                let cep = document.getElementById('cep').value
                //define url como a concatenação do website database com o cep obtido no html
                let url = 'https://viacep.com.br/ws/' + cep + '/json/'
                //requisição http para o link da url já concatenada
                fetch(url)
                    //caso a requisição se confirme; define a função response que armazena a resposta da url 
                    .then(response => response.json())
                    //cria a função data para designar cada dado para seu respectivo elemento html
                    .then(data=> {
                        document.getElementById('logradouro').value = data.logradouro
                        document.getElementById('bairro').value = data.bairro
                        document.getElementById('localidade').value = data.localidade
                        document.getElementById('uf').value = data.uf
                    })
                    //caso dê errado; alerta de erro.
                    .catch(error => console.error(error))
                }
        </script>
    </body>
</html>